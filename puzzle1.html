<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Puzzle I – The Circle</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container lore-container">
    <h1>Puzzle I: The First Cipher</h1>
    <p class="lore-text">
      Decode the phrase using a Caesar shift of <strong>7</strong>.<br>
      Enter the decoded secret to unlock the hidden page.
    </p>

    <div class="puzzle-box">
      <!-- Proper cipher -->
      <p class="cipher">Aol zljyla whao pz opkklu!</p>
      <input id="answer" type="text" placeholder="Type the decoded secret" />
      <button id="check">Unlock</button>
      <p id="status" class="lore-text"></p>
    </div>

    <div id="secretLink" class="hidden">
      <p>Congratulations! You unlocked: 
        <a href="secret.html">Inner Circle Archive</a>
      </p>
    </div>
  </div>

  <script>
    // Caesar shift decoder
    function caesarShift(str, shift) {
      return str.replace(/[a-z]/gi, (char) => {
        const base = char <= 'Z' ? 65 : 97;
        return String.fromCharCode(((char.charCodeAt(0) - base + shift) % 26) + base);
      });
    }

    const cipherEl = document.querySelector('.cipher');
    const checkBtn = document.getElementById('check');
    const answerInput = document.getElementById('answer');
    const status = document.getElementById('status');
    const secretLink = document.getElementById('secretLink');

    if (cipherEl) {
      const cipherText = cipherEl.innerText.trim();
      const decoded = caesarShift(cipherText, 19); // +19 = -7 shift

      checkBtn.addEventListener('click', () => {
        const attempt = answerInput.value.trim();
        if (!attempt) {
          status.innerText = 'Please type the decoded phrase.';
          return;
        }
        if (attempt.toLowerCase() === decoded.toLowerCase()) {
          status.innerText = 'Unlocked — welcome.';
          secretLink.classList.remove('hidden');
        } else {
          status.innerText = 'Incorrect — try again.';
        }
      });
    }
  </script>
</body>
</html>
